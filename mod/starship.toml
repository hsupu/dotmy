# https://starship.rs/config/
# https://starship.rs/advanced-config/#style-strings

# 提示符前补充一新行
add_newline = true

# 扫描当前目录前的超时时间 in ms
scan_timeout = 100
# starship 命令的超时时间 in ms
command_timeout = 2_000

format = """
$shlvl\
$shell\
$username\
$hostname\
$localip\
$directory\
\
$git_branch\
$git_commit\
$git_state\
$git_metrics\
$git_status\
$hg_branch\
\
$time\
$memory_usage\
$battery\
$status\
$cmd_duration\
$jobs\
$env_var\
\
$line_break\
$sudo\
$character\
"""

# $aws\
# $azure\
# $buf\
# $cmake\
# $cobol\
# $conda\
# $container\
# $crystal\
# $dart\
# $deno\
# $docker_context\
# $dotnet\
# $elixir\
# $elm\
# $erlang\
# $gcloud\
# $golang\
# $haskell\
# $helm\
# $java\
# $julia\
# $kotlin\
# $kubernetes\
# $lua\
# $nim\
# $nix_shell\
# $nodejs\
# $ocaml\
# $openstack\
# $package\
# $perl\
# $php\
# $pulumi\
# $purescript\
# $python\
# $red\
# $rlang\
# $ruby\
# $rust\
# $scala\
# $singularity\
# $swift\
# $terraform\
# $vagrant\
# $vcsh\
# $vlang\
# $zig\
#
# $custom\

[battery]
format = "[$symbol$percentage]($style) "

[[battery.display]]
threshold = 20
style = "bold red"

[character]
# 命令提示符字样
# ❯ ➜
# success_symbol = "[➜](bold green)"
# error_symbol = "[➜](bold red)"

[cmd_duration]
format = "last [$duration]($style) "
style = "yellow"

min_time = 2_000
# show_milliseconds = true

show_notifications = true
# in ms
min_time_to_notify = 300_000

[directory]
format = "in [$path]($style)[$read_only]($read_only_style) "
# false 是指总是使用路径分隔符 "/"
use_os_path_sep = false
home_symbol = '$HOME'

# truncation_length = 1152921504606846975 # 2^63 - 1
truncate_to_repo = false
truncation_symbol = "…/"

repo_root_style = "bold yellow"
repo_root_format = "in [$repo_root]($repo_root_style)[$path]($style)[$read_only]($read_only_style) "

# [env_var.SHELL]
# variable = "SHELL"
# default = "unknown shell"

# [env_var.USER]
# default = "unknown user"

[git_branch]
format = "on [$symbol$branch]($style) "
ignore_branches = ["main", "master"]

[git_commit]
format = '[\($hash\)]($style)$tag '
# style = "bright-red"
style = "green"
commit_hash_length = 8
only_detached = false
# tag_disabled = false
# tag_symbol = " 📌 "
tag_symbol = " #"

[git_state]
format = '\([$state( $progress_current/$progress_total)]($style)\) '
am = "am"
am_or_rebase = "am/rebase"
bisect = "bisect"
cherry_pick = "🍒"
merge = "merge"
rebase = "rebase"
revert = "revert"

[git_metrics]
format = '([+$added]($added_style) )([-$deleted]($deleted_style) )'
# disabled = false

[git_status]
format = '([\[$all_status$ahead_behind\]]($style) )'
disabled = true
# WSL 访问 Windows 路径的效率不高，此项使运行在 WSL 中遇到这种情形时转而使用 exe 版本（需要指定路径）
# windows_starship = ""

[hostname]
format = "on [$hostname]($style) "
# ssh_only = false

[jobs]
format = "[bg=$number]($style) "
style = "bright-black"
# symbol_threshold = 1152921504606846975
# symbol = ""
number_threshold = 1

[localip]
format = "IP=[$localipv4]($style) "
style = "red"
# disabled = false
ssh_only = false

[memory_usage]
format = 'via $symbol[$ram]($style) '
# disabled = false
threshold = 0

[shell]
format = "[$indicator]($style) "
# disabled = false

[shlvl]
# 约定使用 $env:SHLVL 记录 shell 深度
format = "L$shlvl "
disabled = false
threshold = 2

[status]
format = '[\[$symbol$status\]]($style) '
disabled = false
map_symbol = true
symbol = "🔴"
# 默认留空，同时不显示 exitcode 0
# success_symbol = "🟢OK"
# recognize_signal_code = false
# 当捕获到信号时
# signal_symbol = "⛔"
sigint_symbol = "☮"

[sudo]
format = "[as $symbol]($style)"
# diabled = true
symbol = "♾️"
# allow_windows = true

[time]
format = "at [$time]($style) "
disabled = false
style = "bright-blue"

[username]
format = "[$user]($style) "
# false 是指，当 root、非当前用户、处于 SSH 会话时显示
# show_always = true

# https://starship.rs/config/#custom-commands
[custom.foo]
command = "echo foo" # shows output of command
files = ["foo"] # can specify filters but wildcards are not supported
when = """ test "$HOME" == "$PWD" """
format = " transcending [$output]($style)"
